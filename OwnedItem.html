<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nexus | My Collection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #00f2ff; --bg: #0a0b10; --card-bg: rgba(255,255,255,0.05); --equipped: #00ff88; }
        body { background: var(--bg); color: white; font-family: sans-serif; padding: 40px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .card { background: var(--card-bg); border: 1px solid #333; padding: 20px; border-radius: 15px; text-align: center; position: relative; }
        .card.active { border-color: var(--equipped); box-shadow: 0 0 15px rgba(0,255,136,0.2); }
        .card i { font-size: 2.5rem; margin-bottom: 10px; display: block; }
        .btn { width: 100%; padding: 10px; border-radius: 5px; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-equip { background: var(--primary); color: black; }
        .btn-unequip { background: #444; color: white; }
        .status-dot { position: absolute; top: 10px; right: 10px; width: 8px; height: 8px; border-radius: 50%; background: #222; }
        .active .status-dot { background: var(--equipped); }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" style="color: var(--primary);">‚Üê Back</a>
        <h1>Armory & Achievements</h1>

        <h3>Equipment</h3>
        <div id="item-grid" class="grid"></div>

        <h3>Badges</h3>
        <div id="badge-grid" class="grid"></div>
    </div>

    <script>
        function render() {
            const inv = JSON.parse(localStorage.getItem('nexus_inventory')) || [];
            const itemGrid = document.getElementById('item-grid');
            const badgeGrid = document.getElementById('badge-grid');
            
            itemGrid.innerHTML = ''; badgeGrid.innerHTML = '';

            inv.forEach(item => {
                const isEquipped = item.equipped === true;
                const html = `
                    <div class="card ${isEquipped ? 'active' : ''}">
                        <div class="status-dot"></div>
                        <i class="fas ${item.icon || 'fa-cube'}" style="color:${item.color || 'var(--primary)'}"></i>
                        <b>${item.name}</b>
                        <button class="btn ${isEquipped ? 'btn-unequip' : 'btn-equip'}" onclick="toggleEquip('${item.name}', '${item.type}')">
                            ${isEquipped ? 'UNEQUIP' : 'EQUIP'}
                        </button>
                    </div>
                `;
                if(item.type === 'badge') badgeGrid.innerHTML += html;
                else itemGrid.innerHTML += html;
            });
        }

        function toggleEquip(name, type) {
            let inv = JSON.parse(localStorage.getItem('nexus_inventory')) || [];
            inv = inv.map(i => {
                if (i.name === name) {
                    i.equipped = !i.equipped;
                } else if (i.type === type) {
                    // Only one badge or one item of same type equipped at once
                    i.equipped = false; 
                }
                return i;
            });
            localStorage.setItem('nexus_inventory', JSON.stringify(inv));
            render();
        }
        window.onload = render;
    </script>
</body>
</html>